---
title: "mmstat4"
author: 
- name: "Sigbert Klinke" 
  email: sigbert@hu-berlin.de
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  html_document:
    toc: true
    toc_depth: 4
vignette: > 
  %\VignetteIndexEntry{mmstat4} 
  %\VignetteEngine{knitr::rmarkdown} 
  \usepackage[utf8]{inputenc} 
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r , echo=FALSE}
suppressPackageStartupMessages(library(mmstat4))
```

# General

The aim of this package is to provide teaching material for various statistics courses for students.

The central function `ghopen` can be used to

* Open Shiny Apps, R and R Markdown files in RStudio,
* load data files, and
* display HTML and PDF files in a browser.

## Getting started

The URL to a zipfile could be `https://github.com/sigbertklinke/mmstat4.dummy/archive/refs/heads/main.zip`. 
A user-defined key, e.g. `dummy`, can be used via `ghset` to access this URL. 
`ghset` asks whether the contents of the zip file should be saved permanently or temporarily and downloads it if necessary.

The extracted files are stored locally, e.g. `/tmp/RtmprUedU2/mmstat4.dummy-main/LICENSE`. In addition, unique short names, related to the zip file content, are generated from the path components.

```{r}
# downloads a small repository and makes it the current one
ghget("dummy")    
ghrepos()
ghlist("BANK2", full.names=TRUE) # full names
ghlist("BANK2")                  # short names
#
x <- ghload("data/BANK2.sav")
str(x)
```

If you choose to open a non-data set file then invisibly the full path to the file is returned.

## `ghget`, `ghrepos`

* `ghget` makes the last repository the current one and downloads it if necessary.
* `ghrepos` returns a data frame with the known repositories.

```{r}
library("mmstat4")
ghget(test="https://github.com/sigbertklinke/mmstat4.dummy/archive/refs/heads/main.zip", .tempdir=TRUE) # make it the current repo and installs it if necessary
ghrepos()
```

Note: You should call `ghget` whenever the `library` was called to set the current repository. 

## `ghlist`, `ghquery`

With `ghlist` you can get a list of unique (short) names for all files or a subset based on a regular expression `pattern` in the repository

```{r}
str(ghlist())
ghlist("\\.pdf$") # get all PDF files
```

With `ghquery` you can query the list of unique (short) names for all files based on the overlap distance.

```{r}
ghlist("bnk")  # pattern = "bnk
ghquery("bnk") # nearest string matching to "bnk"
```

## RStudio addins

The package comes with two RStudio addins (see under `Addins -> MMSTAT4`):

* _Open a file from a zip file_ (`ghopenAddin`) which gives access to the unpacked zip file and opens the choosen file into a RStudio editor window.

* _Runs a Shiny app from a zip file_ (`ghappAddin`) which extracts all directories with Shiny apps and opens the choosen app in a web browser (using the default browser).

# Frequently asked questions

## How can I force a reload of a zip file?

```{r, eval=FALSE}
ghget("dummy", .force=TRUE)
```

## How can I store a zip file permanently or temporarily?

```{r, eval=FALSE}
ghget("dummy", .force=TRUE) 
```

and answer the question  `"Install downloaded repository to a temporary directory instead of 'xxx'?"` with

* `y` to install it temporarily, or
* `n` to install it permamently to `xxx`.

```{r, eval=FALSE}
ghget("dummy", .force=TRUE, .tempdir=TRUE)  # store temporarily in tempdir()
ghget("dummy", .force=TRUE, .tempdir=FALSE) # store permanently 
ghget("dummy", .force=TRUE, .tempdir="~") # store permanently in my home directory
```

Note: If a repository was installed permanently and you switch back to temporarily storage then the downloaded files will not be deleted.

## How can I find all directories with Shiny apps?

```{r, eval=FALSE}
ghget("dummy", .tempdir=TRUE)
ghlist(pattern="/(app|server)\\.R$")
ghopen("dbscan") # open the app
```

## How can I find all `csv` data files?

```{r}
ghget("dummy", .tempdir=TRUE)
ghlist(pattern="\\.csv$", ignore.case=TRUE, full.names=TRUE)
# import yourself
library("rio")
pechstein <- import(ghlist(pattern="pechstein.csv$", full.names=TRUE))
str(pechstein)
# use mmstat4 for importing
ghlist(pattern="\\.csv$")
pechstein <- ghload("pechstein.csv")
str(pechstein)
```

# Default repositories

The package has three default repositories: `dummy`, `hu.stat`, and  `hu.data`. 

```{r, echo=FALSE, message=FALSE, warnings=FALSE, results='asis'}
tabl <- "
| Repository       | Size          | ZIP file location |
| :--------------- | :-------------| :--------|
| `dummy`          | 3 MB          | `https://github.com/sigbertklinke/mmstat4.dummy/archive/refs/heads/main.zip`  |
| `hu.stat`        | 29 MB         | `https://github.com/sigbertklinke/mmstat4.data/archive/refs/heads/main.zip`   |
| `hu.data`        | 33 MB         | `https://github.com/sigbertklinke/mmstat4.stat/archive/refs/heads/main.zip`   |
"
cat(tabl) 
```

`dummy` is small subsample of `hu.stat` and `hu.data` which is intended for examples and test purposes. 

## Lecture Notes Sigbert Klinke, HU Berlin

### Basic statistics I+II (in german)

Mathematische Grundlagen - Einführung - Grundbegriffe - Univariate Verteilungen - Parameter  univariater Verteilungen - Bivariate Verteilungen - Parameter bivariater Verteilungen - Regressionanalyse - Zeitreihenanalyse - Indexzahlen - Wahrscheinlichkeitsrechnung - Zufallsvariablen - So lügt man mit Statistik - Wichtige Verteilungsmodelle - Stichprobentheorie - Statistische Schätzverfahren - Regressionsmodell - Konfidenzintervalle - Statistische Testverfahren - Parameterische Tests - Nichtparametrische Tests

```{r, eval=FALSE}
ghget("hu.stat")
ghopen("Statistik.pdf")
ghopen("Aufgaben.pdf")
ghopen("Loesungen.pdf")
ghopen("Formelsammlung.pdf")
```

### Data analysis

General - R - Basics and data generation - Test and estimation theory - Parameter of
distributions - Distribution - Transformations - Robust statistics - Missing values -
Subgroup analysis - Correlation and association - Multivariate graphics - Principal component analysis - Exploratory factor analysis - Reliability - Cluster analysis -
Regression analysis - Linear regression - Nonparametric regression - Classification and regression trees - Neural networks

```{r, eval=FALSE}
ghget("hu.data")
ghopen("dataanalysis.pdf")
```

## Lecture Notes Bernd Rönz, HU Berlin (in german)

### Computergestützte Statistik I mit SPSS 10 (2001)

Einführung - Entdeckung und Identifikation von Ausreißern - Prüfung der Verteilungsform von Variablen - Parametervergleiche bei unbhängigen Stichproben - Anhänge A-D, Literaturverzeichnis, Index

```{r, eval=FALSE}
ghget("hu.data")
ghopen("cs1_roenz.pdf")
```

### Computergestützte Statistik II mit SPSS 10 (2000)

Vorwort - Überprüfung von Zusammenhängen - Regressionsanalyse - Reliabilitäts- und Homogenitätsanalyse von Konstrukten - Anhänge A-H, Literaturverzeichnis, Stichwortverzeichnis

```{r, eval=FALSE}
ghget("hu.data")
ghopen("cs2_roenz.pdf")
```

### Generalisierte lineare Modelle mit SPSS 10 (2001)

Einführung - Verallgemeinerte lineare Modelle (generalized linear models, GLM) - Modellierung binärer Daten - Das multinomiale Logit Modell - Modellierung multinomialer Daten (log-lineare Modelle) - Literaturverzeichnis, Index 

```{r, eval=FALSE}
ghget("hu.data")
ghopen("glm_roenz.pdf")
```
